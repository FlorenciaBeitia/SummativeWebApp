{% extends 'base.html' %}
{% block content %}
  <h2>{{ user['full_name'] }} ({{ user['username'] }})</h2>
  <div class="card">
    <div><strong>Email:</strong> {{ user['email'] }}</div>
    <div><strong>Age:</strong> {{ user['age'] or 'â€”' }}</div>
    <div style="margin-top:0.5rem"><strong>Bio:</strong>
      <div class="small">{{ user['bio'] or 'No bio provided.' }}</div>
    </div>
    <div class="actions">
      <a href="{{ url_for('main.update', user_id=user['id']) }}">Edit</a> |
      <a href="{{ url_for('main.index') }}">Back to list</a> |
      <form id="deleteForm" method="post" action="{{ url_for('main.delete', user_id=user['id']) }}" style="display:inline">
        {{ delete_form.hidden_tag() }}
        <button type="button" id="openDelete" class="btn" style="background:#d32f2f;color:white">Delete</button>
      </form>
    </div>
  </div>
  <!-- Confirmation modal to confirm delete -->
  <div id="confirmModal" class="modal" style="display:none">
    <div class="modal-content">
      <p>Are you sure you want to delete this user?</p>
      <div style="margin-top:0.5rem">
        <button id="confirmYes" class="btn" style="background:#d32f2f;color:white">Yes, delete</button>
        <button id="confirmNo" class="btn">No</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      var openBtn = document.getElementById('openDelete');
      var modal = document.getElementById('confirmModal');
      var noBtn = document.getElementById('confirmNo');
      var yesBtn = document.getElementById('confirmYes');
      var form = document.getElementById('deleteForm');
      if(!openBtn) return;
      openBtn.addEventListener('click', function(){ modal.style.display = 'block'; });
      noBtn.addEventListener('click', function(){ modal.style.display = 'none'; });
      yesBtn.addEventListener('click', function(e){ e.preventDefault(); form.submit(); });
      // close modal on outside click
      window.addEventListener('click', function(e){ if(e.target === modal) modal.style.display = 'none'; });
    })();
  </script>
{% endblock %}
